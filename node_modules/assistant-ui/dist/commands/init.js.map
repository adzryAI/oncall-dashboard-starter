{"version":3,"sources":["../../src/commands/init.ts"],"sourcesContent":["import { Command } from \"commander\";\nimport { spawn } from \"cross-spawn\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport chalk from \"chalk\";\nimport { create } from \"./create\";\n\nexport const init = new Command()\n  .name(\"init\")\n  .description(\"initialize assistant-ui in a new or existing project\")\n  .action(async () => {\n    // Check if package.json exists in the current directory\n    const packageJsonPath = path.join(process.cwd(), \"package.json\");\n    const packageJsonExists = fs.existsSync(packageJsonPath);\n\n    if (packageJsonExists) {\n      // If package.json exists, run shadcn add command\n      console.log(\n        chalk.blue(\"Initializing assistant-ui in existing project...\"),\n      );\n\n      const child = spawn(\n        \"npx\",\n        [\n          `shadcn@latest`,\n          \"add\",\n          \"https://r.assistant-ui.com/chat/b/ai-sdk-quick-start/json\",\n        ],\n        {\n          stdio: \"inherit\",\n        },\n      );\n\n      child.on(\"error\", (error) => {\n        console.error(`Error: ${error.message}`);\n      });\n\n      child.on(\"close\", (code) => {\n        if (code !== 0) {\n          console.log(`shadcn process exited with code ${code}`);\n        }\n      });\n    } else {\n      // If package.json doesn't exist, use the create command\n      console.log(chalk.blue(\"Creating a new assistant-ui project...\"));\n\n      // Execute the create command with default template\n      await create.parseAsync([]);\n    }\n  });\n"],"mappings":";AAAA,SAAS,eAAe;AACxB,SAAS,aAAa;AACtB,OAAO,QAAQ;AACf,OAAO,UAAU;AACjB,OAAO,WAAW;AAClB,SAAS,cAAc;AAEhB,IAAM,OAAO,IAAI,QAAQ,EAC7B,KAAK,MAAM,EACX,YAAY,sDAAsD,EAClE,OAAO,YAAY;AAElB,QAAM,kBAAkB,KAAK,KAAK,QAAQ,IAAI,GAAG,cAAc;AAC/D,QAAM,oBAAoB,GAAG,WAAW,eAAe;AAEvD,MAAI,mBAAmB;AAErB,YAAQ;AAAA,MACN,MAAM,KAAK,kDAAkD;AAAA,IAC/D;AAEA,UAAM,QAAQ;AAAA,MACZ;AAAA,MACA;AAAA,QACE;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA;AAAA,QACE,OAAO;AAAA,MACT;AAAA,IACF;AAEA,UAAM,GAAG,SAAS,CAAC,UAAU;AAC3B,cAAQ,MAAM,UAAU,MAAM,OAAO,EAAE;AAAA,IACzC,CAAC;AAED,UAAM,GAAG,SAAS,CAAC,SAAS;AAC1B,UAAI,SAAS,GAAG;AACd,gBAAQ,IAAI,mCAAmC,IAAI,EAAE;AAAA,MACvD;AAAA,IACF,CAAC;AAAA,EACH,OAAO;AAEL,YAAQ,IAAI,MAAM,KAAK,wCAAwC,CAAC;AAGhE,UAAM,OAAO,WAAW,CAAC,CAAC;AAAA,EAC5B;AACF,CAAC;","names":[]}